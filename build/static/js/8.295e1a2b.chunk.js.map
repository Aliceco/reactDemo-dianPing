{"version":3,"sources":["containers/Search/components/SearchBox/index.js","containers/Search/components/PopularSearch/index.js","containers/Search/components/SearchHistory/index.js","containers/Search/index.js"],"names":["SearchBox","handleClickItem","item","_this","props","onClickItem","handleChange","e","onChange","target","value","handleClear","onClear","handleCancel","onCancel","_this$props","this","inputText","relatedKeywords","react_default","a","createElement","className","onClick","length","renderSuggestList","_this2","map","key","id","bind","keyword","quantity","Component","PopularSearch","handleClick","data","index","SearchHistory","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","Search","handleClearHistory","clearHistoryKeywords","searchActions","handleChangeInput","text","_this$props$searchAct","setInputText","loadRelatedKeywords","_this$props$searchAct2","addHistoryKeywords","loadRelatedShops","history","push","clearInputText","goBack","popularKeywords","historyKeywords","Search_components_SearchBox","Search_components_PopularSearch","Search_components_SearchHistory","loadPopularKeywords","connect","console","log","getRelatedKeywords","getInputText","getPopularKeywords","getHistoryKeywords","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/8.295e1a2b.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './index.css'\r\n\r\n// const data = [\r\n//     {\r\n//         id: 1,\r\n//         keyword: \"火锅\",\r\n//         quantity: 8710\r\n//     },\r\n//     {\r\n//         id: 2,\r\n//         keyword: \"火锅自助\",\r\n//         quantity: 541\r\n//     },\r\n//     {\r\n//         id: 3,\r\n//         keyword: \"火锅 三里屯\",\r\n//         quantity: 65\r\n//     },\r\n//     {\r\n//         id: 4,\r\n//         keyword: \"火锅 望京\",\r\n//         quantity: 133\r\n//     },\r\n//     {\r\n//         id: 5,\r\n//         keyword: \"火锅家常菜\",\r\n//         quantity: 179\r\n//     }\r\n// ];\r\n\r\nclass SearchBox extends Component {\r\n    render() {\r\n        const {inputText, relatedKeywords} = this.props\r\n        return (\r\n            <div className=\"searchBox\">\r\n                <div className=\"searchBox__container\">\r\n                    <input className=\"searchBox__text\" value={inputText} onChange={this.handleChange}/>\r\n                    <span className=\"searchBox__clear\" onClick={this.handleClear}></span>\r\n                    <span className=\"searchBox__cancel\" onClick={this.handleCancel}>取消</span>\r\n                </div>\r\n                {relatedKeywords.length > 0 ? this.renderSuggestList(relatedKeywords) : null}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderSuggestList(relatedKeywords) {\r\n        return (\r\n            <ul className=\"searchBox__list\">\r\n                {\r\n                    relatedKeywords.map(item => {\r\n                        return (\r\n                            <li key={item.id} onClick={this.handleClickItem.bind(this, item)} className=\"searchBox__item\">\r\n                                <span className=\"searchBox__itemKeyworkd\">{item.keyword}</span>\r\n                                <span className=\"searchBox__itemQuantity\">约{item.quantity}个结果</span>\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n\r\n            </ul>\r\n        )\r\n    }\r\n\r\n    handleClickItem = (item) => {\r\n        this.props.onClickItem(item)\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        this.props.onChange(e.target.value)\r\n    }\r\n\r\n    handleClear = () => {\r\n        this.props.onClear()\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.props.onCancel()\r\n    }\r\n}\r\n\r\nexport default SearchBox;\r\n","import React, { Component } from 'react';\r\nimport \"./index.css\"\r\n\r\n// const data = ['三里屯','朝阳大悦城','西单','海底捞','星巴克','局气','火锅','温泉','烤鸭']\r\n\r\nclass PopularSearch extends Component {\r\n    render() {\r\n        const {data} = this.props\r\n        return (\r\n            <div className=\"popularSearch\">\r\n                {\r\n                    data.map((item,index) => {\r\n                        return (\r\n                            <span onClick={this.handleClick.bind(this, item)} key={item.id} className=\"popularSearch__item\">{item.keyword}</span>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n    handleClick = (item) => {\r\n        this.props.onClickItem(item)\r\n    }\r\n}\r\n\r\nexport default PopularSearch;\r\n","import React, { Component } from 'react';\r\nimport \"./index.css\"\r\n\r\nclass SearchHistory extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            data: [\"烤鸭\", \"火锅\", \"面条\"]\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {data} = this.props\r\n        return (\r\n            <div className=\"searchHistory\">\r\n                <div className=\"searchHistory__header\">搜索记录</div>\r\n                <ul className=\"searchHistory__list\">\r\n                    {\r\n                        data.map((item, index) =>{\r\n                            return <li key={item.id} onClick={this.handleClick.bind(this, item)}className=\"searchHistory__item\">\r\n                                {item.keyword}\r\n                            </li>\r\n                        })\r\n                    }\r\n                </ul>\r\n                <div className=\"searchHistory__clear\" onClick={this.handleClear}>清除搜索记录</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    handleClick = (item) => {\r\n        this.props.onClickItem(item)\r\n    }\r\n\r\n    handleClear = () => {\r\n        this.props.onClear()\r\n    }\r\n\r\n}\r\n\r\nexport default SearchHistory;\r\n","import React, { Component } from 'react';\r\nimport SearchBox from './components/SearchBox'\r\nimport PopularSearch from './components/PopularSearch'\r\nimport SearchHistory from './components/SearchHistory'\r\nimport './index.css'\r\n\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\nimport {actions as searchActions,\r\n    getRelatedKeywords, getInputText,\r\n    getHistoryKeywords, getPopularKeywords}\r\n    from \"../../redux/modules/ui/search\";\r\n\r\n\r\nclass Search extends Component {\r\n    render() {\r\n        const {inputText, relatedKeywords, popularKeywords, historyKeywords} = this.props\r\n        return (\r\n            <div>\r\n                <SearchBox inputText={inputText} relatedKeywords={relatedKeywords}\r\n                           onChange={this.handleChangeInput}\r\n                           onClickItem={this.handleClickItem}\r\n                           onClear={this.handleClear}\r\n                           onCancel={this.handleCancel}\r\n                />\r\n                <PopularSearch data={popularKeywords} onClickItem={this.handleClickItem}/>\r\n                <SearchHistory data={historyKeywords}\r\n                               onClickItem={this.handleClickItem}\r\n                               onClear={this.handleClearHistory}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n    // 清除历史记录\r\n    handleClearHistory = () => {\r\n        const {clearHistoryKeywords} = this.props.searchActions\r\n        clearHistoryKeywords()\r\n    }\r\n    // 搜索框\r\n    handleChangeInput = (text) => {\r\n        const { setInputText, loadRelatedKeywords } = this.props.searchActions\r\n        setInputText(text)\r\n        loadRelatedKeywords(text)\r\n    }\r\n    // 点击关键词\r\n    handleClickItem = (item) => {\r\n        const { setInputText, addHistoryKeywords, loadRelatedShops } = this.props.searchActions\r\n        setInputText(item.keyword)\r\n        addHistoryKeywords(item.id)\r\n        loadRelatedShops(item.id)\r\n        // 跳转搜索页\r\n        this.props.history.push('/search/result')\r\n    }\r\n    // 清除搜索文本框\r\n    handleClear = () => {\r\n        const { clearInputText } = this.props.searchActions\r\n        clearInputText()\r\n    }\r\n    // 取消搜索\r\n    handleCancel = () => {\r\n        this.handleClear()\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { loadPopularKeywords } = this.props.searchActions\r\n        loadPopularKeywords()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {clearInputText} = this.props.searchActions\r\n        clearInputText()\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    console.log(state)\r\n    return {\r\n        relatedKeywords: getRelatedKeywords(state),\r\n        inputText: getInputText(state),\r\n        popularKeywords: getPopularKeywords(state),\r\n        historyKeywords: getHistoryKeywords(state)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        searchActions: bindActionCreators(searchActions, dispatch)\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search)\r\n"],"sourceRoot":""}